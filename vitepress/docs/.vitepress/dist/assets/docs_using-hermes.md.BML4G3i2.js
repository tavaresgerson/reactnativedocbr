import{_ as a,c as e,o as s,a4 as i}from"./chunks/framework.nQaBHiNx.js";const o="/assets/312113267-388b181e-16bd-4444-a586-8efcfe5e5da4.Bzix7piI.png",t="/assets/312120479-2e3ad0ad-158e-44f9-9380-766c60734ef3.xCg6zAM_.png",n="/assets/312123307-6526427d-5ece-4ed1-b980-a84cfb4b2ff1.D4k-Dzkc.png",r="/assets/312123621-2ed9b518-98c0-4a67-85f2-5524997c72d9.Clk86AQj.png",d="/assets/312123846-8e11055e-5ac9-4da6-a9da-cd4d854a3779.DkRh_3BN.png",C=JSON.parse('{"title":"Usando o Hermes","description":"","frontmatter":{},"headers":[],"relativePath":"docs/using-hermes.md","filePath":"docs/using-hermes.md"}'),p={name:"docs/using-hermes.md"},l=i('<h1 id="usando-o-hermes" tabindex="-1">Usando o Hermes <a class="header-anchor" href="#usando-o-hermes" aria-label="Permalink to &quot;Usando o Hermes&quot;">​</a></h1><p><a href="https://hermesengine.dev/" target="_blank" rel="noreferrer">Hermes</a> é um mecanismo JavaScript de código aberto otimizado para React Native. Para muitos aplicativos, o uso do Hermes resultará em melhor tempo de inicialização, menor uso de memória e tamanho menor do aplicativo quando comparado ao JavaScriptCore. Hermes é usado por padrão pelo React Native e nenhuma configuração adicional é necessária para habilitá-lo.</p><h2 id="pacote-hermes" tabindex="-1">Pacote Hermes <a class="header-anchor" href="#pacote-hermes" aria-label="Permalink to &quot;Pacote Hermes&quot;">​</a></h2><p>React Native vem com uma versão integrada do Hermes. Estaremos construindo uma versão do Hermes para você sempre que lançarmos uma nova versão do React Native. Isso garantirá que você esteja consumindo uma versão do Hermes totalmente compatível com a versão do React Native que você está usando.</p><p>Historicamente, tivemos problemas ao combinar versões do Hermes com versões do React Native. Isso elimina totalmente esse problema e oferece aos usuários um mecanismo JS compatível com a versão específica do React Native.</p><p>Esta mudança é totalmente transparente para os usuários do React Native. Você ainda pode desativar o Hermes usando o comando descrito nesta página. Você pode ler mais sobre a <a href="/architecture/bundled-hermes.html">implementação técnica nesta página</a>.</p><h2 id="confirmando-que-hermes-esta-em-uso" tabindex="-1">Confirmando que Hermes está em uso <a class="header-anchor" href="#confirmando-que-hermes-esta-em-uso" aria-label="Permalink to &quot;Confirmando que Hermes está em uso&quot;">​</a></h2><p>Se você criou recentemente um novo aplicativo do zero, deverá ver se o Hermes está ativado na visualização de boas-vindas:</p><p><img src="'+o+'" alt="image"></p><p>Uma variável global <code>HermesInternal</code> estará disponível em JavaScript que pode ser usada para verificar se o Hermes está em uso:</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> isHermes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">global.HermesInternal;</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title"><strong>CUIDADO</strong></p><p>Se você estiver usando uma forma não padrão de carregar o pacote JS, é possível que a variável <code>HermesInternal</code> esteja disponível, mas você não esteja usando o bytecode pré-compilado altamente otimizado. Confirme se você está usando o arquivo <code>.hbc</code> e também compare o antes/depois conforme detalhado abaixo.</p></div><p>Para ver os benefícios do Hermes, tente fazer uma versão build/implantação do seu aplicativo para comparar. Por exemplo; da raiz do seu projeto:</p><h3 id="android" tabindex="-1">Android <a class="header-anchor" href="#android" aria-label="Permalink to &quot;Android&quot;">​</a></h3><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-A1DX2" id="tab-UG3VQ5Y" checked="checked"><label for="tab-UG3VQ5Y">npm</label><input type="radio" name="group-A1DX2" id="tab-rTrA-2q"><label for="tab-rTrA-2q">yarn</label></div><div class="blocks"><div class="language-bash vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> android</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --mode=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;release&quot;</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> android</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> release</span></span></code></pre></div></div></div><h3 id="ios" tabindex="-1">iOS <a class="header-anchor" href="#ios" aria-label="Permalink to &quot;iOS&quot;">​</a></h3><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-IK_AG" id="tab-HKqyyxb" checked="checked"><label for="tab-HKqyyxb">npm</label><input type="radio" name="group-IK_AG" id="tab-NJbeHgf"><label for="tab-NJbeHgf">yarn</label></div><div class="blocks"><div class="language-bash vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ios</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --mode=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Release&quot;</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ios</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Release</span></span></code></pre></div></div></div><p>Isso compilará o JavaScript em bytecode durante o tempo de construção, o que melhorará a velocidade de inicialização do seu aplicativo no dispositivo.</p><h3 id="depurando-js-no-hermes-usando-devtools-do-google-chrome" tabindex="-1">Depurando JS no Hermes usando DevTools do Google Chrome <a class="header-anchor" href="#depurando-js-no-hermes-usando-devtools-do-google-chrome" aria-label="Permalink to &quot;Depurando JS no Hermes usando DevTools do Google Chrome&quot;">​</a></h3><p>Hermes oferece suporte ao depurador do Chrome implementando o protocolo do inspetor do Chrome. Isso significa que as ferramentas do Chrome podem ser usadas para depurar diretamente o JavaScript em execução no Hermes, em um emulador ou em um dispositivo físico real.</p><div class="info custom-block"><p class="custom-block-title"><strong>INFORMAÇÕES</strong></p><p>Observe que isso é muito diferente da &quot;Depuração remota de JS&quot; do menu de desenvolvimento no aplicativo documentado na seção <a href="/docs/debugging.html">Depuração</a>, que na verdade executa o código JS no V8 do Chrome em sua máquina de desenvolvimento (laptop ou desktop).</p></div><p>O Chrome se conecta ao Hermes em execução no dispositivo via Metro, então você precisa saber onde o Metro está ouvindo. Normalmente, isso estará em <code>localhost:8081</code>, mas é configurável. Ao executar o <code>yarn start</code>, o endereço é gravado em <code>stdout</code> na inicialização.</p><p>Depois de saber onde o servidor Metro está escutando, você pode conectar-se ao Chrome seguindo as seguintes etapas:</p><ol><li>Navegue para <code>chrome://inspect</code> em uma instância do navegador Chrome.</li><li>Use o botão <code>Configure...</code> para adicionar o endereço do servidor Metro (normalmente <code>localhost:8081</code> conforme descrito acima).</li></ol><div class="one-image"><img class="rounded-shadow" src="'+t+'"></div><div class="one-image"><img class="rounded-shadow" src="'+n+'"></div><ol start="3"><li>Agora você deve ver um alvo &quot;Hermes React Native&quot; com um link &quot;inspecionar&quot; que pode ser usado para abrir o depurador. Se você não vir o link “inspect”, certifique-se de que o servidor Metro esteja em execução.</li></ol><div class="one-image"><img class="rounded-shadow" src="'+r+'"></div><ol start="4"><li>Agora você pode usar as ferramentas de depuração do Chrome. Por exemplo, para fazer um ponto de interrupção na próxima vez que algum JavaScript for executado, clique no botão de pausa e acione uma ação em seu aplicativo que faria com que o JavaScript fosse executado.</li></ol><div class="one-image"><img class="rounded-shadow" src="'+d+`"></div><h2 id="habilitando-hermes-em-versoes-mais-antigas-do-react-native" tabindex="-1">Habilitando Hermes em versões mais antigas do React Native <a class="header-anchor" href="#habilitando-hermes-em-versoes-mais-antigas-do-react-native" aria-label="Permalink to &quot;Habilitando Hermes em versões mais antigas do React Native&quot;">​</a></h2><p>Hermes é o mecanismo padrão no React Native 0.70. Esta seção explica como habilitar o Hermes em versões mais antigas do React Native. Primeiro, certifique-se de usar pelo menos a versão 0.60.4 do React Native para habilitar o Hermes no Android ou 0.64 do React Native para habilitar o Hermes no iOS.</p><p>Se você já possui um aplicativo baseado em uma versão anterior do React Native, você terá que atualizá-lo primeiro. Consulte <a href="/docs/upgrading.html">Atualizando para novas versões do React Native</a> para saber como fazer isso. Depois de atualizar o aplicativo, certifique-se de que tudo funciona antes de tentar mudar para o Hermes.</p><div class="info custom-block"><p class="custom-block-title"><strong>NOTA PARA COMPATIBILIDADE REACT NATIVE</strong></p><p>Cada lançamento da Hermes é direcionado a uma versão RN específica. A regra é sempre seguir rigorosamente os <a href="https://github.com/facebook/hermes/releases" target="_blank" rel="noreferrer">lançamentos do Hermes</a>. A incompatibilidade de versão pode resultar na falha instantânea de seus aplicativos na pior das hipóteses.</p></div><div class="warning custom-block"><p class="custom-block-title">NOTA PARA USUÁRIOS DO WINDOWS</p><p>Hermes requer <a href="https://www.microsoft.com/en-us/download/details.aspx?id=48145" target="_blank" rel="noreferrer">Microsoft Visual C++ 2015 Redistributable</a>.</p></div><h3 id="android-1" tabindex="-1">Android <a class="header-anchor" href="#android-1" aria-label="Permalink to &quot;Android&quot;">​</a></h3><p>Edite seu arquivo <code>android/gradle.properties</code> e certifique-se de que <code>hermesEnabled</code> seja verdadeiro:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span># Use esta propriedade para ativar ou desativar o mecanismo Hermes JS.</span></span>
<span class="line"><span># Se definido como falso, você usará JSC.</span></span>
<span class="line"><span>hermesEnabled=true</span></span></code></pre></div><div class="info custom-block"><p class="custom-block-title"><strong>OBSERVAÇÃO</strong></p><p>Esta propriedade foi adicionada no React Native 0.71. Se você não conseguir encontrá-lo em seu arquivo <code>gradle.properties</code>, consulte a documentação da versão correspondente do React Native que você está usando.</p></div><p>Além disso, se estiver usando o ProGuard, você precisará adicionar estas regras em <code>proguard-rules.pro</code>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>-keep class com.facebook.hermes.unicode.** { *; }</span></span>
<span class="line"><span>-keep class com.facebook.jni.** { *; }</span></span></code></pre></div><p>A seguir, se você já criou seu aplicativo pelo menos uma vez, limpe a compilação:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> android</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./gradlew</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clean</span></span></code></pre></div><p>É isso! Agora você deve conseguir desenvolver e implantar seu aplicativo normalmente:</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-ekavH" id="tab-2xKTYzM" checked="checked"><label for="tab-2xKTYzM">npm</label><input type="radio" name="group-ekavH" id="tab-f1nXeoH"><label for="tab-f1nXeoH">yarn</label></div><div class="blocks"><div class="language-bash vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> android</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> android</span></span></code></pre></div></div></div><h3 id="ios-1" tabindex="-1">iOS <a class="header-anchor" href="#ios-1" aria-label="Permalink to &quot;iOS&quot;">​</a></h3><p>Desde o React Native 0.64, o Hermes também roda em iOS. Para habilitar o Hermes para iOS, edite seu arquivo <code>ios/Podfile</code> e faça a alteração ilustrada abaixo:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>   use_react_native!(</span></span>
<span class="line"><span>     :path =&gt; config[:reactNativePath],</span></span>
<span class="line"><span>     # to enable hermes on iOS, change \`false\` to \`true\` and then install pods</span></span>
<span class="line"><span>     # By default, Hermes is disabled on Old Architecture, and enabled on New Architecture.</span></span>
<span class="line"><span>     # You can enable/disable it manually by replacing \`flags[:hermes_enabled]\` with \`true\` or \`false\`.</span></span>
<span class="line"><span>-    :hermes_enabled =&gt; flags[:hermes_enabled],</span></span>
<span class="line"><span>+    :hermes_enabled =&gt; true</span></span>
<span class="line"><span>   )</span></span></code></pre></div><p>Por padrão, você usará Hermes se estiver na Nova Arquitetura. Ao especificar um valor como <code>true</code> ou <code>false</code>, você pode ativar/desativar o Hermes como desejar.</p><p>Depois de configurá-lo, você pode instalar os pods Hermes com:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ios</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><p>É isso! Agora você deve conseguir desenvolver e implantar seu aplicativo normalmente:</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-2pVwF" id="tab-hQEzNPP" checked="checked"><label for="tab-hQEzNPP">npm</label><input type="radio" name="group-2pVwF" id="tab-a-scDJH"><label for="tab-a-scDJH">yarn</label></div><div class="blocks"><div class="language-bash vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ios</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ios</span></span></code></pre></div></div></div><h2 id="voltando-para-javascriptcore" tabindex="-1">Voltando para JavaScriptCore <a class="header-anchor" href="#voltando-para-javascriptcore" aria-label="Permalink to &quot;Voltando para JavaScriptCore&quot;">​</a></h2><p>React Native também oferece suporte ao uso de JavaScriptCore como mecanismo JavaScript. Siga estas instruções para cancelar o Hermes.</p><h3 id="android-2" tabindex="-1">Android <a class="header-anchor" href="#android-2" aria-label="Permalink to &quot;Android&quot;">​</a></h3><p>Edite seu arquivo <code>android/gradle.properties</code> e mude <code>hermesEnabled</code> de volta para <code>false</code>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span># Use esta propriedade para ativar ou desativar o mecanismo Hermes JS.</span></span>
<span class="line"><span># Se definido como false, você usará JSC.</span></span>
<span class="line"><span>hermesEnabled=false</span></span></code></pre></div><h3 id="ios-2" tabindex="-1">iOS <a class="header-anchor" href="#ios-2" aria-label="Permalink to &quot;iOS&quot;">​</a></h3><p>Edite seu arquivo <code>ios/Podfile</code> e faça a alteração ilustrada abaixo:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark has-diff vp-code"><code><span class="line"><span>   use_react_native!(</span></span>
<span class="line"><span>     :path =&gt; config[:reactNativePath],</span></span>
<span class="line"><span>     # Hermes agora está habilitado por padrão. Desative definindo este sinalizador como false.</span></span>
<span class="line"><span>     # As próximas versões do React Native podem contar com get_default_flags(), mas</span></span>
<span class="line"><span>     # deixamos isso explícito aqui para auxiliar no processo de atualização do React Native.</span></span>
<span class="line diff remove"><span>     :hermes_enabled =&gt; flags[:hermes_enabled],</span></span>
<span class="line diff add"><span>     :hermes_enabled =&gt; false,</span></span>
<span class="line"><span>   )</span></span></code></pre></div>`,61),c=[l];function h(m,u,v,g,k,b){return s(),e("div",null,c)}const y=a(p,[["render",h]]);export{C as __pageData,y as default};
