import{_ as a,c as s,o as i,a4 as e}from"./chunks/framework.nQaBHiNx.js";const u=JSON.parse('{"title":"Mapas de origem","description":"","frontmatter":{},"headers":[],"relativePath":"docs/sourcemaps.md","filePath":"docs/sourcemaps.md"}'),n={name:"docs/sourcemaps.md"},t=e(`<h1 id="mapas-de-origem" tabindex="-1">Mapas de origem <a class="header-anchor" href="#mapas-de-origem" aria-label="Permalink to &quot;Mapas de origem&quot;">​</a></h1><p>Os mapas de origem permitem mapear um arquivo transformado de volta ao arquivo de origem original. O objetivo principal dos mapas de origem é ajudar na depuração e na investigação de problemas de compilações de lançamento.</p><p>Sem os mapas de origem, ao encontrar um erro na compilação da versão, você verá um stacktrace como:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypeError:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Cannot</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> read</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> property</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;data&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> undefined</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> anonymous</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">app:///index.android.bundle:1:4277021</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">native</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">app:///index.android.bundle:1:227785</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Com os mapas de origem gerados, um stacktrace incluirá o caminho, o nome do arquivo e o número da linha do arquivo de origem original:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypeError:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Cannot</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> read</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> property</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;data&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> undefined</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> anonymous</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">src/modules/notifications/Permission.js:15:requestNotificationPermission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">native</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node_modules/regenerator-runtime/runtime.js:64:Generator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Isso permite que você faça a triagem de problemas de lançamento usando um stacktrace decifrável.</p><p>Siga as instruções abaixo para começar a usar os mapas de origem.</p><h2 id="habilitar-mapas-de-origem-no-android" tabindex="-1">Habilitar mapas de origem no Android <a class="header-anchor" href="#habilitar-mapas-de-origem-no-android" aria-label="Permalink to &quot;Habilitar mapas de origem no Android&quot;">​</a></h2><h3 id="hermes" tabindex="-1">Hermes <a class="header-anchor" href="#hermes" aria-label="Permalink to &quot;Hermes&quot;">​</a></h3><div class="info custom-block"><p class="custom-block-title">INFORMAÇÕES</p><p>Os mapas de origem são criados no modo Release por padrão, a menos que <code>hermesFlagsRelease</code> não esteja definido. Nesse caso, os mapas de origem terão que ser habilitados.</p></div><p>Para fazer isso, certifique-se de que o seguinte esteja definido no arquivo <code>Android/app/build.gradle</code> do seu aplicativo.</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">project.ext.react </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    enableHermes: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    hermesFlagsRelease: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-O&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-output-source-map&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// mais qualquer sinalizador necessário para definir isso fora do padrão</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><p>Se feito corretamente, você deverá ver o local de saída do mapa de origem durante a saída da compilação Metro.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>Writing bundle output to:, android/app/build/generated/assets/react/release/index.android.bundle</span></span>
<span class="line"><span>Writing sourcemap output to:, android/app/build/intermediates/sourcemaps/react/release/index.android.bundle.packager.map</span></span></code></pre></div><p>As compilações de desenvolvimento não produzem um pacote configurável e, portanto, já possuem símbolos, mas se a compilação de desenvolvimento estiver empacotada, você pode usar <code>hermesFlagsDebug</code> como acima para habilitar mapas de origem.</p><h2 id="habilitar-mapas-de-origem-no-ios" tabindex="-1">Habilitar mapas de origem no iOS <a class="header-anchor" href="#habilitar-mapas-de-origem-no-ios" aria-label="Permalink to &quot;Habilitar mapas de origem no iOS&quot;">​</a></h2><p>Os mapas de origem estão desabilitados por padrão. Para habilitá-los é necessário definir uma variável de ambiente <code>SOURCEMAP_FILE</code>.</p><p>Para fazer isso, dentro do Xcode vá para a fase de construção - &quot;Bundle React Native code and images&quot;.</p><p>Na parte superior do arquivo, próximo às outras exportações, adicione uma entrada para <code>SOURCEMAP_FILE</code> ao local e nome preferidos. Como abaixo:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>export SOURCEMAP_FILE=&quot;$(pwd)/../main.jsbundle.map&quot;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export NODE_BINARY=node</span></span>
<span class="line"><span>../node_modules/react-native/scripts/react-native-xcode.sh</span></span></code></pre></div><p>Se feito corretamente, você deverá ver o local de saída do mapa de origem durante a saída da compilação Metro.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>Writing bundle output to:, Build/Intermediates.noindex/ArchiveIntermediates/application/BuildProductsPath/Release-iphoneos/main.jsbundle</span></span>
<span class="line"><span>Writing sourcemap output to:, Build/Intermediates.noindex/ArchiveIntermediates/application/BuildProductsPath/Release-iphoneos/main.jsbundle.map</span></span></code></pre></div><h2 id="simbolizacao-manual" tabindex="-1">Simbolização Manual <a class="header-anchor" href="#simbolizacao-manual" aria-label="Permalink to &quot;Simbolização Manual&quot;">​</a></h2><div class="info custom-block"><p class="custom-block-title"><strong>INFORMAÇÕES</strong></p><p>Você pode ler sobre a simbolização manual de um rastreamento de pilha na <a href="/docs/symbolication.html">página de simbolização</a>.</p></div>`,25),o=[t];function p(l,r,d,h,k,c){return i(),s("div",null,o)}const g=a(n,[["render",p]]);export{u as __pageData,g as default};
